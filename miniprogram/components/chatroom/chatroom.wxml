<view class="chatroom">
 	<cu-custom  bgColor="bg-gradual-pink" isBack="{{true}}">
 		<view slot="backText">返回</view>
 		<view slot="content">聊天室</view>
 	</cu-custom>
 	<!-- chats -->
 	<scroll-view class="body" scroll-y style="height:calc(100vh - {{CustomBar}}px)" bindscrolltoupper="onScrollToUpper">
 		<view wx:for="{{chats}}" wx:key="{{item._id}}" id="item-{{index}}" class="message {{openId == item._openid ? 'message__self' : 'message__right'}}">
 			<image class="avatar" src="{{item.avatar}}" mode="scaleToFill"></image>
 			<view class="main">
 				<view class="nickname">{{item.nickName}}</view>
 				<block wx:if="{{item.msgType === 'image'}}">
 					<view class="image-wrapper">
 						<view class="loading" wx:if="{{item.writeStatus > -1}}">{{item.writeStatus}}%</view>
 						<image src="{{item.tempFilePath || item.imgFileID}}" data-fileid="{{item.tempFilePath || item.imgFileID}}" class="image-content" style="{{item.imgStyle}}" mode="scallToFill" bindtap="onMessageImageTap"></image>
 					</view>
 				</block>
 				<block wx:else>
 					<view class="text-wrapper">
 						<view class="loading" wx:if="{{item.writeStatus === 'pending'}}">···</view>
 						<view class="text-content">{{item.textContent}}</view>
 					</view>
 				</block>
 			</view>
 		</view>
		 <view class="cu-bar foot input {{InputBottom!=0?'cur':''}}" style="bottom:{{InputBottom}}px" wx:if="{{userInfo}}">
 		<view class="action">
 			<text class="cuIcon-sound text-grey"></text>
 		</view>
 		<input class="solid-bottom" adjust-position="{{false}}" focus="{{false}}" bindfocus="InputFocus" bindblur="InputBlur"  maxlength="300" type="text" confirm-hold="{{false}}" cursor-spacing="10" value="{{textInputValue}}" confirm-type="done" bindinput="onTextBindnput"></input>
 		<view class="action">
 			<text class="cuIcon-emojifill text-grey"  bindtap="onChooseImage"></text>
 		</view>
 		<view class="action">
 			<text class="cuIcon-roundaddfill text-grey"  bindtap="send" wx:if="{{textInputValue==''}}"></text>
 			<button class="cu-btn bg-green shadow text-style" bindtap="onConfirmSendText" size="mini" wx:if="{{textInputValue!=''}}">发送</button>
 		</view>
 	</view>
 	<view class="cu-bar foot" wx:if="{{!userInfo}}">
 		<button open-type="getUserInfo" bindgetuserinfo="onGetUserInfo" class="userinfo">请先登录后参与聊天</button>
 	</view>
 	</scroll-view>
</view>